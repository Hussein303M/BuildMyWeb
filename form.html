<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Appointment Form - BuildMyWeb</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <h1>Appointment Details</h1>
    <p>Fill out your information to confirm your booking</p>
</header>

<section id="booking-form">
<form id="appointmentForm">
    <label for="name">Name:</label>
    <input type="text" id="name" required>

    <label for="email">Email:</label>
    <input type="email" id="email" required>

    <label for="business">Business Name:</label>
    <input type="text" id="business" required>

    <button type="submit" class="btn">Confirm Appointment</button>
</form>
</section>

<script>
const form = document.getElementById("appointmentForm");

form.addEventListener("submit", function(e){
    e.preventDefault();

    // Get form values
    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const business = document.getElementById("business").value.trim();

    // Get selected slot from sessionStorage
    const slotId = sessionStorage.getItem("selectedSlot");
    if(!slotId){
        alert("Please select a time slot first!");
        return;
    }

    // Save booked slot
    let bookedSlots = JSON.parse(localStorage.getItem("bookedSlots")) || [];
    if(!bookedSlots.includes(slotId)){
        bookedSlots.push(slotId);
        localStorage.setItem("bookedSlots", JSON.stringify(bookedSlots));
    }

    // Save full booking info
    let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
    bookings.push({
        slot: slotId,
        name: name,
        email: email,
        business: business
    });
    localStorage.setItem("bookings", JSON.stringify(bookings));

    // Clear selected slot
    sessionStorage.removeItem("selectedSlot");

    // Redirect to thank you page
    window.location.href = "thankyou.html";
});
</script>
</body>
</html>
